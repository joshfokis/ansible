- name: Restart a container
  vars:
   secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37346161633061386139656136636130396439613031636265613333646262373462336562373136
          3862343465633532373762303332376166363532373934630a623165323737663835636531306465
          66336631353338666564333539356633396634346535396637633162623439373463616265336162
          6630623738386532360a396262316231653132313162313339636637653934393532363866633465
          61363530386162643262623135663334633639393838393737323865376435663965666662313565
          31366362303339383864626261616237636634366635623761623063663734353866383537656434
          633930666263376236376166383461653231
  docker_container:
    name: vpn
    image: dperson/openvpn-client
    state: started
    pull: yes
    restart: yes
    restart_policy: unless-stopped
    interactive: yes
    tty: yes
    ports:
     - "9117:9117" 
     - "7878:7878"
     - "8112:8112"
     - "8989:8989"
    env:
        PGID: "1000"
        PUID: "1000"
        TZ: "America/Chicago"
        
    volumes:
     - /home/josh/configs/vpn/:/vpn
     - "{{ secret }}"

    devices:
     - /dev/net/tun
    
    capabilities:
     - NET_ADMIN
