- name: Restart a container
  vars:
   - secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30333865383863343737306438333632366433323130376132323361366339383066386530313231
          6539613239313761383538323964373739366537313362350a633865323935353032353832346534
          62373734666232656436343363636333646339363635343462346234333266326463303236373734
          3832623536623962320a333230323938326635393966633164306130323830343138356239313766
          37626463623835313937663963616539353161353461646533373336323732646638376633336532
          65326130303333646662376432656634623030626362393331323431663834636539356131623766
          346162373961376430333133626432653731
  docker_container:
    name: vpn
    image: dperson/openvpn-client
    state: started
    pull: yes
    restart: yes
    restart_policy: unless-stopped
    interactive: yes
    tty: yes
    ports:
     - "9117:9117" 
     - "7878:7878"
     - "8112:8112"
     - "8989:8989"
    env:
        PGID: "1000"
        PUID: "1000"
        TZ: "America/Chicago"
        
    volumes:
     - /home/josh/configs/vpn/:/vpn
     - {{ secret }}

    devices:
     - /dev/net/tun
    
    capabilities:
     - NET_ADMIN
